<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BurgerJack - Blackjack</title>
  <style>
    :root {
      --bg: #0a2a68;
      --panel: #121b36;
      --gold: #ffca28;
      --text: #fff;
    }
    body {
      margin: 0;
      font-family: Inter, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      text-align: center;
    }
    .topbar {
      display: flex;
      justify-content: center;
      gap: 14px;
      padding: 12px;
      background: linear-gradient(180deg, #1c2d5b, var(--panel));
      border-radius: 0 0 16px 16px;
    }
    .pill {
      display: flex;
      align-items: center;
      gap: 6px;
      background: rgba(10,15,35,.8);
      border: 1px solid rgba(255,255,255,.08);
      padding: 6px 12px;
      border-radius: 999px;
    }
    .table {
      margin: 30px auto;
      background: #115c1c;
      border-radius: 20px;
      width: 90%;
      max-width: 800px;
      padding: 40px 20px;
      min-height: 500px;
      box-shadow: inset 0 0 20px #052b0d, 0 0 20px rgba(0,0,0,.5);
    }
    .hand {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 15px 0;
      flex-wrap: wrap;
    }
    .card {
      width: 60px;
      height: 90px;
      border-radius: 8px;
      background: white;
      color: black;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,.5);
    }
    .card.back {
      background: url("burger_image.png") center/cover no-repeat;
      color: transparent;
    }
    .title {
      font-size: 22px;
      font-weight: bold;
      margin: 10px 0 4px;
      color: var(--gold);
    }
    .score {
      font-size: 16px;
      margin-bottom: 10px;
      color: #fff;
    }
    .controls {
      margin: 20px;
    }
    .button {
      background: var(--gold);
      border: none;
      padding: 10px 18px;
      margin: 6px;
      font-weight: bold;
      border-radius: 10px;
      cursor: pointer;
    }
    .button:disabled {
      background: gray;
      cursor: not-allowed;
    }
    .footer {
      margin: 20px;
    }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="pill">üçî Coins: <b id="coins">0</b></div>
    <div class="pill">‚ö° Energy: <b id="energy">0</b></div>
    <div class="pill">üíé Gems: <b id="gems">0</b></div>
  </div>

  <div class="table">
    <div class="title">Dealer</div>
    <div class="score" id="dealerScore">Score: 0</div>
    <div class="hand" id="dealerHand"></div>

    <div class="title">You</div>
    <div class="score" id="playerScore">Score: 0</div>
    <div class="hand" id="playerHand"></div>
  </div>

  <div class="controls">
    <input type="number" id="betAmount" value="10" min="1" style="padding:6px; width:80px;"/>
    <button class="button" onclick="startGame()">Start</button>
    <button class="button" id="hitBtn" onclick="hit()" disabled>Hit</button>
    <button class="button" id="standBtn" onclick="stand()" disabled>Stand</button>
  </div>

  <div class="footer">
    <a href="index.html" class="button">‚¨Ö Back to Home</a>
  </div>

<script>
const SAVE_KEY = "burgercoin_save_v1";

function loadGame(){
  const raw = localStorage.getItem(SAVE_KEY);
  return raw ? JSON.parse(raw) : {coins:0, energy:0, gems:0};
}
function saveGame(data){
  localStorage.setItem(SAVE_KEY, JSON.stringify(data));
}
function updateTopbar(){
  let d = loadGame();
  document.getElementById("coins").textContent = Math.floor(d.coins||0);
  document.getElementById("energy").textContent = d.energy||0;
  document.getElementById("gems").textContent = d.gems||0;
}

let deck = [], playerHand = [], dealerHand = [], bet=0;

function createDeck(){
  const suits = ["‚ô†","‚ô•","‚ô¶","‚ô£"];
  const values = ["A","2","3","4","5","6","7","8","9","10","J","Q","K"];
  deck=[];
  for(let s of suits){
    for(let v of values){
      deck.push({s,v});
    }
  }
}
function shuffle(){
  for(let i=deck.length-1;i>0;i--){
    let j=Math.floor(Math.random()*(i+1));
    [deck[i],deck[j]]=[deck[j],deck[i]];
  }
}
function getCardValue(card){
  if(["J","Q","K"].includes(card.v)) return 10;
  if(card.v==="A") return 11;
  return parseInt(card.v);
}
function calcScore(hand){
  let score=0, aces=0;
  for(let c of hand){
    score+=getCardValue(c);
    if(c.v==="A") aces++;
  }
  while(score>21 && aces>0){
    score-=10; aces--;
  }
  return score;
}
function renderHands(showAllDealer=false){
  const dealerEl=document.getElementById("dealerHand");
  const playerEl=document.getElementById("playerHand");
  dealerEl.innerHTML="";
  playerEl.innerHTML="";

  dealerHand.forEach((c,i)=>{
    let div=document.createElement("div");
    div.className="card";
    if(i===0 && !showAllDealer){
      div.classList.add("back");
    } else {
      div.textContent=c.v+c.s;
    }
    dealerEl.appendChild(div);
  });
  playerHand.forEach(c=>{
    let div=document.createElement("div");
    div.className="card";
    div.textContent=c.v+c.s;
    playerEl.appendChild(div);
  });

  document.getElementById("dealerScore").textContent="Score: "+(showAllDealer?calcScore(dealerHand):"?");
  document.getElementById("playerScore").textContent="Score: "+calcScore(playerHand);
}
function startGame(){
  let data=loadGame();
  bet=parseInt(document.getElementById("betAmount").value);
  if(data.coins<bet){alert("Not enough coins!"); return;}
  data.coins-=bet;
  saveGame(data); updateTopbar();

  createDeck(); shuffle();
  playerHand=[deck.pop(),deck.pop()];
  dealerHand=[deck.pop(),deck.pop()];
  renderHands(false);
  document.getElementById("hitBtn").disabled=false;
  document.getElementById("standBtn").disabled=false;
}
function hit(){
  playerHand.push(deck.pop());
  renderHands(false);
  if(calcScore(playerHand)>21){
    endGame(false);
  }
}
function stand(){
  while(calcScore(dealerHand)<17){
    dealerHand.push(deck.pop());
  }
  renderHands(true);
  let p=calcScore(playerHand);
  let d=calcScore(dealerHand);
  if(d>21 || p>d){endGame(true);}
  else if(p<d){endGame(false);}
  else{endGame(null);}
}
function endGame(result){
  let data=loadGame();
  if(result===true){
    data.coins+=bet*2;
    alert("You win!");
  } else if(result===false){
    alert("You lose!");
  } else {
    data.coins+=bet;
    alert("Push (Draw).");
  }
  saveGame(data); updateTopbar();
  document.getElementById("hitBtn").disabled=true;
  document.getElementById("standBtn").disabled=true;
}
updateTopbar();
</script>
</body>
</html>

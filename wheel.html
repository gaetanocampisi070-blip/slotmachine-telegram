<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover"/>
  <title>BurgerCoin - Wheel</title>
  <meta name="theme-color" content="#0a2a68"/>
  <style>
    :root {
      --bg:#0a2a68; --sky1:#224aa2; --sky2:#081b43;
      --panel:#121b36; --panel2:#1c2d5b;
      --gold1:#ffe082; --gold2:#ffca28; --gold3:#ffb300;
      --text:#fff; --muted:#c7d2fe;
      --shadow: 0 18px 32px rgba(0,0,0,.46);
    }
    html,body{margin:0;height:100%;
      background: radial-gradient(120% 120% at 50% 0%,var(--sky1) 0%,var(--bg) 55%,var(--sky2) 100%);
      color:var(--text);font-family:Inter,Roboto,Arial,sans-serif;
    }
    .app{max-width:520px;margin:0 auto;padding:20px;text-align:center; margin-top:30%;}
    .topbar{display:flex;justify-content:center;gap:14px;padding:10px 16px;background:linear-gradient(180deg,var(--panel2),var(--panel));
      border-radius:16px;box-shadow:var(--shadow);}
    .pill{display:flex;align-items:center;gap:6px;background:rgba(10,15,35,.8);
      border:1px solid rgba(255,255,255,.08);padding:6px 12px;border-radius:999px;}
    .wheel-container{position:relative;margin:30px auto;width:300px;height:300px;}
    canvas{width:100%;height:100%;border-radius:50%;box-shadow:0 0 12px rgba(0,0,0,.5);}
    .arrow{position:absolute;top:-25px;left:50%;transform:translateX(-50%);width:0;height:0;
      border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:25px solid red;}
    .button{background:linear-gradient(180deg,var(--gold2),var(--gold3));color:#000;
      padding:12px 24px;border-radius:12px;font-size:18px;font-weight:700;cursor:pointer;border:none;margin-top:20px;}
    .button:disabled{background:gray;cursor:not-allowed;color:#fff;}
    .footer{font-size:14px;color:var(--muted);margin-top:30px;}
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div class="pill">üçî <b id="coins">0</b></div>
      <div class="pill">‚ö° <b id="energy">500</b></div>
      <div class="pill">üíé <b id="gems">0</b></div>
    </div>

    <div class="wheel-container">
      <div class="arrow"></div>
      <canvas id="wheel" width="300" height="300"></canvas>
    </div>

    <button id="spinBtn" class="button">üé° Spin (1 Gem)</button>
    <div style="margin-top:15px;">
      <a href="index.html" class="button" style="text-decoration:none;">‚¨Ö Back to Game</a>
    </div>

    <div class="footer">by Burger Games</div>
  </div>

<script>
const SAVE_KEY = "burgercoin_save_v1";
function loadGame(){const raw=localStorage.getItem(SAVE_KEY);return raw?JSON.parse(raw):{coins:0,energy:500,gems:0};}
function saveGame(data){localStorage.setItem(SAVE_KEY,JSON.stringify(data));}

let data=loadGame();
let canvas=document.getElementById("wheel");
let ctx=canvas.getContext("2d");
let spinBtn=document.getElementById("spinBtn");
const coinsEl=document.getElementById("coins");
const energyEl=document.getElementById("energy");
const gemsEl=document.getElementById("gems");

// Premi (solo una possibilit√† di 1 gemma)
let rewards=[
  {label:"+500 Coins",type:"coins",amount:500},
  {label:"+100 Energy",type:"energy",amount:100},
  {label:"+1 Gem",type:"gems",amount:1}, // unica gemma
  {label:"+1000 Coins",type:"coins",amount:1000},
  {label:"+200 Energy",type:"energy",amount:200},
  {label:"+750 Coins",type:"coins",amount:750}
];

let angle=0;
function drawWheel(){
  let num=rewards.length;
  let arc=2*Math.PI/num;
  for(let i=0;i<num;i++){
    let start=angle+i*arc;
    ctx.beginPath();
    ctx.fillStyle=i%2?"#ffcc66":"#ffee99";
    ctx.moveTo(150,150);
    ctx.arc(150,150,150,start,start+arc);
    ctx.fill();
    ctx.save();
    ctx.translate(150,150);
    ctx.rotate(start+arc/2);
    ctx.fillStyle="#000";
    ctx.font="16px Arial";
    ctx.textAlign="right";
    ctx.fillText(rewards[i].label,130,5);
    ctx.restore();
  }
}
drawWheel();

let spinning=false, spinAngle=0, spinTime=0, spinTimeTotal=0;
function rotateWheel(){
  spinTime+=30;
  if(spinTime>=spinTimeTotal){
    stopRotateWheel();
    return;
  }
  let spinAngleDelta=spinAngle*(spinTimeTotal-spinTime)/spinTimeTotal;
  angle+=(spinAngleDelta*Math.PI/180);
  drawWheel();
  requestAnimationFrame(rotateWheel);
}
function stopRotateWheel(){
  let degrees=angle*180/Math.PI+90;
  let arcd=360/rewards.length;
  let index=Math.floor((360-(degrees%360))/arcd);
  let reward=rewards[index];
  if(reward.type==="coins") data.coins=(data.coins||0)+reward.amount;
  if(reward.type==="energy") data.energy=(data.energy||0)+reward.amount;
  if(reward.type==="gems") data.gems=(data.gems||0)+reward.amount;
  saveGame(data);
  updateUI();
  alert("üéâ You won " + reward.label + "!");
  spinning=false;
}
function spin(){
  if(spinning) return;
  if(data.gems<=0){alert("Not enough gems!");return;}
  data.gems--; saveGame(data); updateUI();
  spinAngle=Math.random()*10+10;
  spinTime=0; spinTimeTotal=Math.random()*3000+4000;
  spinning=true;
  rotateWheel();
}
spinBtn.addEventListener("click",spin);

function updateUI(){
  coinsEl.textContent=data.coins;
  energyEl.textContent=data.energy;
  gemsEl.textContent=data.gems;
}
updateUI();
</script>
</body>
</html>

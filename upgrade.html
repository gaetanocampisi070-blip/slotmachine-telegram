<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BurgerCoin - Upgrades</title>
  <style>
    :root {
      --bg:#0a2a68; --panel:#121b36; --panel2:#1c2d5b;
      --gold1:#ffe082; --gold2:#ffca28; --gold3:#ffb300;
      --text:#fff; --muted:#c7d2fe; --shadow:0 18px 32px rgba(0,0,0,.46);
    }
    body {
      margin:0; font-family: Inter,Arial,sans-serif; background:var(--bg); color:var(--text);
    }
    .app { max-width:520px; margin:0 auto; padding:20px; text-align:center; }
    .topbar { display:flex; justify-content:center; gap:14px; padding:12px;
      background:linear-gradient(180deg,var(--panel2),var(--panel));
      border-radius:0 0 16px 16px; box-shadow:var(--shadow); }
    .pill { display:flex; align-items:center; gap:6px; background:rgba(10,15,35,.8);
      border:1px solid rgba(255,255,255,.08); padding:6px 12px; border-radius:999px; }
    .title { font-size:28px; font-weight:900; color:var(--gold2);
      text-shadow:0 0 6px var(--gold3),0 0 14px rgba(255,215,0,.9); margin:20px 0; }
    .upgrade { background:linear-gradient(180deg,var(--panel2),var(--panel));
      padding:16px; border-radius:14px; margin:14px 0; box-shadow:var(--shadow); text-align:left; }
    .upgrade h2 { margin:0 0 10px; font-size:20px; color:var(--gold1); }
    .button { background:linear-gradient(180deg,var(--gold2),var(--gold3)); color:#000;
      padding:8px 14px; border-radius:10px; font-size:15px; font-weight:700;
      cursor:pointer; border:none; }
    .button:disabled { background:gray; cursor:not-allowed; color:#fff; }
    .footer { font-size:14px; color:var(--muted); margin-top:30px; }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="pill">üçî Coins: <b id="coins">0</b></div>
    <div class="pill">‚ö° Energy: <b id="energy">0</b></div>
    <div class="pill">üíé Gems: <b id="gems">0</b></div>
  </div>

  <div class="app">
    <h1 class="title">‚ö° Upgrades</h1>

    <div class="upgrade">
      <h2>Multiplier x2</h2>
      <p>Double your coin per tap.</p>
      <button class="button" onclick="buyUpgrade('multiplier2',100)">Buy 100 ‚≠ê</button>
    </div>

    <div class="upgrade">
      <h2>Offline Earnings</h2>
      <p>Earn 5% of your coins per hour while offline.</p>
      <button class="button" onclick="buyUpgrade('offline',250)">Buy 250 ‚≠ê</button>
    </div>

    <div class="upgrade">
      <h2>+20% Lifetime Bonus</h2>
      <p>Gain +20% coins per tap permanently.</p>
      <button class="button" onclick="buyUpgrade('bonus20',60)">Buy 60 ‚≠ê</button>
    </div>

    <div class="upgrade">
      <h2>Premarket Coins</h2>
      <p>Instant BurgerCoins purchase:</p>
      <button class="button" onclick="giveCoins(1000)">1000 üçî (30 ‚≠ê)</button>
      <button class="button" onclick="giveCoins(3000)">3000 üçî (80 ‚≠ê)</button>
      <button class="button" onclick="giveCoins(5000)">5000 üçî (125 ‚≠ê)</button>
      <button class="button" onclick="giveCoins(10000)">10000 üçî (220 ‚≠ê)</button>
      <button class="button" onclick="giveCoins(50000)">50000 üçî (1000 ‚≠ê)</button>
    </div>

    <div class="footer">
      <a href="index.html" class="button">‚¨Ö Back to Home</a>
    </div>
  </div>

<script>
const SAVE_KEY = "burgercoin_save_v1";

function loadGame(){
  const raw = localStorage.getItem(SAVE_KEY);
  return raw ? JSON.parse(raw) : {coins:0, energy:500, gems:0};
}
function saveGame(data){
  localStorage.setItem(SAVE_KEY, JSON.stringify(data));
}
function updateTopbar(){
  let d = loadGame();
  document.getElementById("coins").textContent = Math.floor(d.coins||0);
  document.getElementById("energy").textContent = d.energy||0;
  document.getElementById("gems").textContent = d.gems||0;
}
function buyUpgrade(type, cost){
  let d = loadGame();
  if(d[`upgrade_${type}`]) { alert("Already purchased!"); return; }
  // Qui in futuro mettiamo pagamento Stars. Ora simuliamo acquisto diretto.
  d[`upgrade_${type}`] = true;
  saveGame(d);
  alert("‚úÖ Upgrade unlocked: " + type);
}
function giveCoins(amount){
  let d = loadGame();
  d.coins = (d.coins||0) + amount;
  saveGame(d);
  updateTopbar();
  alert("‚úÖ You received " + amount + " coins!");
}
// Calcolo offline earnings
function applyOfflineEarnings(){
  let d = loadGame();
  let now = Date.now();
  if(d.upgrade_offline && d.lastSave){
    let diffHours = (now - d.lastSave) / (1000*60*60);
    if(diffHours > 0.05){ // almeno 3 minuti
      let reward = Math.floor((d.coins||0) * 0.05 * diffHours);
      if(reward > 0){
        d.coins += reward;
        alert("üí§ Offline earnings: +" + reward + " coins");
      }
    }
  }
  d.lastSave = now;
  saveGame(d);
  updateTopbar();
}
applyOfflineEarnings();
updateTopbar();
</script>
</body>
</html>